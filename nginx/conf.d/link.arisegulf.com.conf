server {
    listen 80;
    server_name link.arisegulf.com;

    # Redirect all HTTP traffic to HTTPS
    location / {
        return 301 https://$host$request_uri;
    }
}

server {
    listen 443 ssl http2;
    server_name link.arisegulf.com;

    # SSL Configuration
    ssl_certificate /etc/letsencrypt/live/link.arisegulf.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/link.arisegulf.com/privkey.pem;
    include /etc/letsencrypt/options-ssl-nginx.conf;
    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem;

    # Log files for debugging
    access_log /var/log/nginx/link.arisegulf.com.access.log;
    error_log /var/log/nginx/link.arisegulf.com.error.log;

    # --- Redirect for /airtel/rktsn/Pole-Installtion ---
    location = /airtel/rktsn/Pole-Installtion {
        set $redirect_url "https://baserow.arisegulf.com/form/397pmIxlnPNklrPt-g71bDsEl0JbRwzOR0EOXRwk1yo";
        add_header Content-Type 'text/html; charset=utf-8';
        return 200 '
<html>
<head>
    <meta charset="utf-8">
    <title>Arise | Airtel FTTH Pole Installation Submission</title>
    <meta property="og:title" content="Arise | Airtel FTTH Pole Installation Submission">
    <meta property="og:description" content="Submit your pole installation details for the Airtel FTTH project—delivered by Arise in partnership with RKTSN">
    <meta property="og:image" content="https://arisegulf.com/arise-logo.png">
    <meta property="og:url" content="https://link.arisegulf.com/airtel/rktsn/Pole-Installtion">
    <meta name="twitter:card" content="summary_large_image">
    <meta http-equiv="refresh" content="0;url=$redirect_url">
</head>
<body>
    <p>Redirecting to form...</p>
</body>
</html>';
    }

    # --- Redirect for /airtel/rktsn/Pole-Report ---
    location = /airtel/rktsn/Pole-Report {
        set $redirect_url "https://baserow.arisegulf.com/public/grid/1Of8Z89Ft-v5EvDXLjzBrab4k-bkSzbkKlXmG317nEM";
        add_header Content-Type 'text/html; charset=utf-8';
        return 200 '
<html>
<head>
    <meta charset="utf-8">
    <title>Arise | Airtel FTTH Infrastructure Database – Pole Installation Records</title>
    <meta property="og:title" content="Arise | Airtel FTTH Infrastructure Database – Pole Installation Records">
    <meta property="og:description" content="Comprehensive project documentation & visual records by Arise in partnership with RKTSN">
    <meta property="og:image" content="https://arisegulf.com/arise-logo.png">
    <meta property="og:url" content="https://link.arisegulf.com/airtel/rktsn/Pole-Report">
    <meta name="twitter:card" content="summary_large_image">
    <meta http-equiv="refresh" content="0;url=$redirect_url">
</head>
<body>
    <p>Redirecting to form...</p>
</body>
</html>';
    }

    # --- Redirect for /airtel/a2z/imp_mail_1109 ---
    location = /airtel/a2z/imp_mail_1109 {
        set $redirect_url "https://in.zopen.to/ZB1VHnWT3cs6cwUo27iU";
        add_header Content-Type 'text/html; charset=utf-8';
        return 200 '
<html>
<head>
    <meta charset="utf-8">
    <title>Arise | A2Z - Airtel FTTH Project</title>
    <meta property="og:title" content="Arise | A2Z - Airtel FTTH Project">
    <meta property="og:description" content="Urgent follow-up on critically outstanding payments and project status.">
    <meta property="og:image" content="https://arisegulf.com/arise-logo.png">
    <meta property="og:url" content="https://link.arisegulf.com/airtel/a2z/imp_mail_1109">
    <meta name="twitter:card" content="summary_large_image">
    <meta http-equiv="refresh" content="0;url=$redirect_url">
</head>
<body>
    <p>Redirecting to email...</p>
</body>
</html>';
    }

    # --- Landing Page for /rktsn ---
    location = /rktsn {
        alias /usr/share/nginx/html/landing_pages/rktsn.html;
    }

    # --- Default fallback for any other URL on this domain ---
    location / {
        return 404 "Short link not found.";
    }
}
